#!/usr/bin/make -f
.PHONY: clean

LATEX = latexmk -pdf -use-make -output-directory=bin \
		-pdflatex="pdflatex -shell-escape -interaction=nonstopmode"

%.pdf: %.tex
	$(LATEX) $<

watch.%.tex: %.tex
	$(LATEX) -pvc $<

define default_tplt
\documentclass{article}

\usepackage{geometry}
\geometry{
	margin=0.5in,
	bottom=1in
}

\title{Foo Bar}
\author{Me}
\date{\today}

\begin{document}
\maketitle
\end{document}
endef
export default_tplt
new.%.tex:
	@echo "$$default_tplt" > "$(subst new.,,$@)"

clean:
	latexmk -CA
